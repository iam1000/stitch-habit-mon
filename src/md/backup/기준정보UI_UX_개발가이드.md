# 기준정보 관리 UI/UX 개발 가이드

본 문서는 시스템의 **기준정보(Master Data)**를 관리하기 위한 통합 화면 UI/UX 가이드입니다.
기존 '코드 관리' 기능을 확장하여, 공통 코드, 메뉴 구조, 사용자 권한을 한 곳에서 관리합니다.

---

## 1. 개요 (Overview)

*   **화면명**: 기준정보관리 (Master Data Management)
*   **진입점**: 사이드바 > `Master Data` (기준정보관리) 메뉴.
*   **목표**: 개발자 도구(Google Sheets)에 의존하지 않고, 관리자가 웹 화면에서 직접 시스템의 핵심 기준정보를 제어할 수 있도록 함.
*   **다국어 지원**: 시스템 언어 설정(영어/한국어)에 따라 화면명 및 탭 명칭 자동 변경.

---

## 2. 화면 구조 (Layout Design)

### 2.1 탭 구조 (Tabs)

화면 상단 제목("기준정보관리") 아래에 3개의 탭을 배치합니다.

| 탭 명칭 (KR) | 탭 명칭 (EN) | 기능 설명 | 데이터 소스 |
| :--- | :--- | :--- | :--- |
| **공통 코드** | Common Code | 시스템 전반에서 사용하는 공통 코드 그룹 및 상세 코드 관리 | `common_code_mgt` |
| **메뉴 관리** | Menu Management | 시스템 메뉴 정의, 경로, 아이콘, 정렬 순서, 위치(Location) 관리 | `menu_def_mgt` |
| **권한 관리** | Permission Management | 사용자별 메뉴 접근 권한(Access Y/N) 및 설명 관리 | `auth_menu_mgt` |

### 2.2 공통 UI/UX 원칙

*   **테이블 뷰**: 모든 데이터는 목록(Grid/Table) 형태로 표현.
*   **상단 입력 고정 (Add-Row at Top)**:
    *   테이블의 헤더 바로 아래(첫 번째 행)에 **신규 등록 전용 행**을 고정 배치.
    *   입력 후 `[추가(+) ]` 버튼으로 즉시 저장.
*   **인라인 수정 (Inline Edit)**:
    *   목록의 행을 더블 클릭하거나 `[수정]` 버튼 클릭 시 해당 행이 입력 모드로 전환.
    *   수정 모드에서 `[저장] / [취소]` 버튼 노출.
*   **수동 조회 트리거**:
    *   검색 조건(필터, 검색어) 변경 시 **자동으로 조회되지 않음**.
    *   사용자가 조건 변경 후 반드시 **[조회하기(Search)]** 버튼을 클릭해야 목록이 갱신됨.

---

## 3. 상세 화면 설계 (Detail UX)

### 3.1 메뉴 관리 (Menu Management) 탭

시스템의 메뉴 구조를 정의합니다.

*   **조회(Search) 조건**:
    1.  **검색어**: 메뉴 코드 또는 메뉴명(Label) 검색 (텍스트 입력, Enter로 조회).
    2.  **위치(Location) 필터**: Side, Top 등 위치별 필터링 (콤보박스).
    3.  **[조회하기]** 버튼: 클릭 시 위 조건들을 적용하여 목록 갱신.

*   **테이블 컬럼**:
    *   Code, Label Key, Path, Icon Name, Sort Order, Location, Use YN, Description.
    *   **Action**: 수정/삭제 기능.

*   **Mockup (Layout)**:

```text
+-----------------------------------------------------------------------------------------------------------------------+
| [ Code/Label 검색어 입력 ]                 [ Location (▼) ] [ Use YN (▼) ]        [ 조회(Search) ]                    |
+-----------------------------------------------------------------------------------------------------------------------+
|                                                                                                                       |
|  [ 테이블 영역 ]                                                                                                      |
| +-----------+-----------+------------+-------+------+--------+-------+----------------+----------------+              |
| | Code      | Label Key | Path       | Icon  | Sort | Loc    | Use   | Description    | Action         |              |
| +-----------+-----------+------------+-------+------+--------+-------+----------------+----------------+              |
| | [ Input ] | [ Input ] | [ Input ]  | [Inp] | [1]  | [Side] | [Y]   | [ Input ]      | [ 신규추가 ]   | <== 고정 (Add)
| +-----------+-----------+------------+-------+------+--------+-------+----------------+----------------+              |
| | dashboard | dashboard | /dashboard | Home  | 1    | Side   | Y     | 기본 대시보드  | [수정] [삭제]  |              |
| +-----------+-----------+------------+-------+------+--------+-------+----------------+----------------+              |
```



*   **주요 로직**:
    *   **ID 식별**: `uuid`, `id`, `_id` 등 다양한 행 식별자 지원 (문자열 변환 비교).
    *   **편집**: 수정 모드 진입 시 해당 행만 Input 필드로 전환.

---

### 3.2 권한 관리 (Permission Management) 탭

사용자별 메뉴 접근 권한을 제어합니다.

*   **조회(Search) 조건** (독립적 검색 가능):
    1.  **User ID (Email)**: 사용자 이메일 검색 (텍스트 부분 일치).
    2.  **Menu Code**: 메뉴 코드 또는 메뉴명 검색 (텍스트 부분 일치).
    3.  **Description**: 비고(설명) 검색 (텍스트 부분 일치).
    4.  **Use YN**: 사용 여부(Y/N/All) 필터 (콤보박스).
    5.  **Menu Filter**: 특정 메뉴 코드로 정확히 필터링 (콤보박스).
    6.  **[조회하기]** 버튼: 클릭 시 위 모든 조건을 AND 조건으로 적용하여 목록 갱신.

*   **테이블 컬럼**:
    *   User Email, Menu Code, Use YN(Access), Description.
    *   **신규 추가**: 상단 고정 행에서 이메일, 메뉴(콤보), 사용여부, 설명을 입력하여 추가.
    *   **ID 식별**: `uuid` 컬럼 기반의 강력한 행 식별 (String 타입 보장).

*   **Mockup (Layout)**:

```text
+-----------------------------------------------------------------------------------------------------------------------+
| [ User ID (Email) ] [ Menu Code ] [ Description ] [ Use YN (▼) ] [ Menu Filter (▼) ]      [ 조회(Search) ]            |
+-----------------------------------------------------------------------------------------------------------------------+
|                                                                                                                       |
|  [ 테이블 영역 ]                                                                                                      |
| +--------------------+-------------------+----------+----------------+----------------+                               |
| | User Email         | Menu Code         | USE YN   | Description    | Action         |                               |
| +--------------------+-------------------+----------+----------------+----------------+                               |
| | [ Email Input ]    | [ Menu Select ]   | [ Y ]    | [ 비고 입력 ]  | [ 신규추가 ]   | <== 고정 (Add)                |
| +--------------------+-------------------+----------+----------------+----------------+                               |
| | user@test.com      | dashboard         | Y        | 기본 권한      | [수정] [삭제]  |                               |
| +--------------------+-------------------+----------+----------------+----------------+                               |
```


---

## 4. 구현 및 기술 사항 (Technical Notes)

*   **구글 시트 연동**:
    *   `server.js`를 통해 구글 시트 API와 통신.
    *   데이터 추가/수정/삭제 시 `uuid`를 키로 사용.
*   **데이터 정합성**:
    *   `uuid` 컬럼 필수: 모든 시트(`menu_def_mgt`, `auth_menu_mgt`)는 행 식별을 위해 `uuid` 컬럼을 포함해야 함.
    *   **타입 안전성**: ID 비교 시 `String()` 변환을 통해 숫자/문자열 타입 불일치 방지.
*   **다국어 처리**:
    *   `LanguageContext.jsx`를 통해 화면명 및 컬럼명 다국어 지원.
    *   Tab Title, Description, Button Label 등 모든 정적 텍스트는 `t.key` 형태로 매핑.

---

## 5. 변경 이력

| 날짜 | 구분 | 내용 |
| :--- | :--- | :--- |
| 2026-02-11 | UI 개선 | 화면명 변경(코드관리->기준정보관리), 조회 조건 분리 및 추가, 수동 조회 로직 적용 |
